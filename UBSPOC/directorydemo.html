<!DOCTYPE html>
<html lang="it" xml:lang="utf-8" xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <meta http-equiv="Content-Type" content="plain/text; charset=utf-8"/>
  <meta http-equiv="Content-Type" content="application/json"/>
  <meta http-equiv="Content-Type" content="application/x-www-form-urlencoded"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Cache-control" content="no-cache">
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script src="https://sdk-cdn.mypurecloud.com/javascript/132.0.0/purecloud-platform-client-v2.min.js"></script>
        <script src="https://sdk-cdn.mypurecloud.com/client-apps/2.3.0/purecloud-client-app-sdk-70ec0c8b.min.js"></script>
		<script src="https://sdk-cdn.mypurecloud.com/client-apps/2.6.7/purecloud-client-app-sdk.js"></script>

		
    <title>UBS Demo Directory</title>
    <!--<script type="text/javascript" src="jquery-3.3.1.min.js">-->


<style>
	.cx-common-container .cx-titlebar .cx-icon {
    float: left;
    width: 96px;
    height: 96px;
    margin-top: 200px
   }
   .gen-callback-customer-logo {
    display: block;
    width: 337px;
    height: 96px;
    background: url(UBS_Logo_Semibold.svg) no-repeat center;
   }
   label {
    width: 80px;
    display: inline-block;
   }
   legend {
    color: red;
    font-weight: bold
   }
   .button-91 {
  color: #fff;
  padding: 15px 25px;
  background-color: #38D2D2;
  background-image: radial-gradient(93% 87% at 87% 89%, rgba(0, 0, 0, 0.23) 0%, transparent 86.18%), radial-gradient(66% 66% at 26% 20%, rgba(255, 255, 255, 0.55) 0%, rgba(255, 255, 255, 0) 69.79%, rgba(255, 255, 255, 0) 100%);
  box-shadow: inset -3px -3px 9px rgba(255, 255, 255, 0.25), inset 0px 3px 9px rgba(255, 255, 255, 0.3), inset 0px 1px 1px rgba(255, 255, 255, 0.6), inset 0px -8px 36px rgba(0, 0, 0, 0.3), inset 0px 1px 5px rgba(255, 255, 255, 0.6), 2px 19px 31px rgba(0, 0, 0, 0.2);
  border-radius: 14px;
  font-weight: bold;
  font-size: 16px;

  border: 0;

  cursor: pointer;
 
}
 table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 40%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #ddddde;
}
</style/>

  </head>

    <body>
        <noscript>
            For full functionality of this site it is necessary to enable JavaScript. Here are the <a href="http://www.enable-javascript.com/" target="_blank">instructions how to enable JavaScript in your web browser</a>.
        </noscript>

  
	  <h1><i class="gen-callback-customer-logo" style="font-size:48px;"></i>UBS Demo Directory</h1>

	
	<br></br>
    <table>
  <tr>
    <th>Contact</th>
    <th>Phone Number</th>
  </tr>
  <tr>
    <td>Anna Guida</td>
    <td><a href='tel:+491754316729'>Click to Call</a></td>
  </tr>
  <tr>
    <td>Laurent Pret</td>
    <td><a href='tel:+447468694808'>Click to Call</a></td>
  </tr>
  <tr>
    <td>Kameliya Karakasheva</td>
    <td><a href='tel:+41797228737'>Click to Call</a></td>
  </tr>
  <tr>
    <td>Krzysztof Ku≈Çton</td>
    <td><a href='tel:+48881821276'>Click to Call</a></td>
  </tr>
</table>
</body>
</html>
	<br></br>

	
	<br></br>

        <script type="text/javascript">
 $(document).ready(() => {        
const clientId = '27b4cba3-cf71-40c2-8229-21624fed26dc';
const redirectUri = window.location.href;
const platformClient = require('platformClient');
const client = platformClient.ApiClient.instance;
const conversationsApi = new platformClient.ConversationsApi();
const notificationsApi = new platformClient.NotificationsApi();
const usersApi = new platformClient.UsersApi();
client.setEnvironment('euc2.pure.cloud');

 let ani;
 let me, webSocket, conversationsTopic, notificationChannel;
 //document.getElementById("dial3").value = ani;
 //console.log('ani: ', ani);
 client.loginImplicitGrant(clientId, redirectUri)
 .then(() => {
    console.log('Logged in');
 return usersApi.getUsersMe();
 })
		.then((userMe) => {
			console.log('userMe: ', userMe);
			me = userMe;
			return notificationsApi.postNotificationsChannels();
			})
		.then((channel) => {
			console.log('channel: ', channel);
			notificationChannel = channel;
			
			webSocket = new WebSocket(notificationChannel.connectUri);
			//webSocket.onmessage = handleNotification;
			conversationsTopic = 'v2.users.' + me.id + '.conversations';
			const body = [ { id: conversationsTopic } ];
			return notificationsApi.putNotificationsChannelSubscriptions(notificationChannel.id, body);
				
})
 
			document.querySelector('a').onclick = function(e) {
				var href = document.querySelector('a').href;
				let body = {
				'phoneNumber':$('href')
					};}

				// Invoke API
				conversationsApi.postConversationsCalls(body).then(() => {
					// Clear dialstring from text box
					$('href').val('');
				.catch((err) => console.error(err));
			});

};
	
	let searchCustData = function () {
    let elem = document.createElement("script");
    elem.setAttribute("type","text/javascript");
    elem.src = "./widgets.ubs.demo.js"
    document.head.appendChild(elem);
 }		
			
        </script>
    </body>
</html>
